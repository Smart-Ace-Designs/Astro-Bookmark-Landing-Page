---
import type { HTMLAttributes } from "astro/types";
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";

import Button from "./Button.astro";

interface Props extends HTMLAttributes<"div"> {
  imagePath: string;
  alt: string;
}
const { imagePath, alt, ...rest } = Astro.props;

const images = import.meta.glob<{ default: ImageMetadata }>("/src/assets/*.{jpeg,jpg,png,gif,svg}");
if (!images[imagePath])
  throw new Error(`"${imagePath}" does not exist in glob: "src/assets/*.{jpeg,jpg,png,gif,svg}"`);
---

<div class:list={["flex flex-col rounded-md shadow-md", rest.class]}>
  <div class="p6 flex flex-col items-center">
    <Image src={images[imagePath]()} loading="lazy" alt={alt} />
    <h3 class="text-theme-blue mt-5 mb-2 text-lg">
      <slot name="header" />
    </h3>
    <p class="text-theme-gray mb-2 font-light"><slot name="content" /></p>
  </div>
  <hr class="border-theme-white border-b" />
  <div class="flex p-6"><Button theme="primary" class="flex-1">Add & Install Extension</Button></div>
</div>
